<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Mar 13 17:48:56 UTC 2024

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LANG-720] StringEscapeUtils.escapeXml(input) outputs wrong results when an input contains characters in Supplementary Planes.</title>
                <link>https://issues.apache.org/jira/browse/LANG-720</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;Hello.&lt;/p&gt;

&lt;p&gt;I use StringEscapeUtils.escapeXml(input) to escape special characters for XML.&lt;br/&gt;
This method outputs wrong results when input contains characters in Supplementary Planes.&lt;/p&gt;

&lt;p&gt;String str1 = &quot;\uD842\uDFB7&quot; + &quot;A&quot;;&lt;br/&gt;
String str2 = StringEscapeUtils.escapeXml(str1);&lt;/p&gt;

&lt;p&gt;// The value of str2 must be equal to the one of str1,&lt;br/&gt;
// because str1 does not contain characters to be escaped.&lt;br/&gt;
// However, str2 is diffrent from str1.&lt;/p&gt;

&lt;p&gt;System.out.println(URLEncoder.encode(str1, &quot;UTF-16BE&quot;)); //%D8%42%DF%B7A&lt;br/&gt;
System.out.println(URLEncoder.encode(str2, &quot;UTF-16BE&quot;)); //%D8%42%DF%B7%FF%FD&lt;/p&gt;

&lt;p&gt;The cause of this problem is that the loop to translate input character by character is wrong.&lt;br/&gt;
In CharSequenceTranslator.translate(CharSequence input, Writer out),&lt;br/&gt;
loop counter &quot;i&quot; moves from 0 to Character.codePointCount(input, 0, input.length()),&lt;br/&gt;
but it should move from 0 to input.length().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12514062">LANG-720</key>
            <summary>StringEscapeUtils.escapeXml(input) outputs wrong results when an input contains characters in Supplementary Planes.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yabuki">Taro Yabuki</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Thu, 14 Jul 2011 13:24:55 +0000</created>
                <updated>Tue, 19 Jul 2011 05:00:56 +0000</updated>
                            <resolved>Thu, 14 Jul 2011 18:50:17 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.0.1</fixVersion>
                                    <component>lang.*</component>
                    <component>lang.text.translate.*</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13065250" author="yabuki" created="Thu, 14 Jul 2011 13:27:49 +0000"  >&lt;p&gt;Patch for org/apache/commons/lang3/text/translate/CharSequenceTranslator.java.&lt;/p&gt;</comment>
                            <comment id="13065387" author="garydgregory" created="Thu, 14 Jul 2011 16:59:08 +0000"  >&lt;p&gt;The patch does not break any unit test with the latest from SVN but it is missing a unit test.&lt;/p&gt;

&lt;p&gt;Perhaps we should hold off since we are in the middle of a VOTE.&lt;/p&gt;</comment>
                            <comment id="13065455" author="mbenson" created="Thu, 14 Jul 2011 18:50:17 +0000"  >&lt;p&gt;I was also going to ask for a unit test, but wanted to improve my understanding of the situation anyway, so adapted the posted problem code.  Even though we are currently voting on the release of 3.0.0 from RC4 I don&apos;t see why we can&apos;t fix this in trunk; the RC tag is already cut.  I have used the concept of the patch to rewrite the entire method in question, primarily to avoid the modification of a counter variable within a for loop.&lt;/p&gt;

&lt;p&gt;Committed revision 1146844.&lt;/p&gt;</comment>
                            <comment id="13065462" author="garydgregory" created="Thu, 14 Jul 2011 18:57:13 +0000"  >&lt;p&gt;OK, thanks for the redo.&lt;/p&gt;

&lt;p&gt;I think we should cut another RC to pick this up.&lt;/p&gt;</comment>
                            <comment id="13065463" author="mbenson" created="Thu, 14 Jul 2011 18:59:19 +0000"  >&lt;p&gt;was going to punt to the dev list &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I just used a sports metaphor.  :|&lt;/p&gt;</comment>
                            <comment id="13067496" author="bayard" created="Tue, 19 Jul 2011 05:00:56 +0000"  >&lt;p&gt;Note that we&apos;ll release this in 3.0.1. 3.0 will go out with this as a known issue and 3.0.1 will follow (August).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12486437" name="CharSequenceTranslator.java.20110714.diff" size="876" author="yabuki" created="Thu, 14 Jul 2011 13:27:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>67582</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d5hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>