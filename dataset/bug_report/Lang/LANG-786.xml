<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Fri Mar 15 18:57:13 UTC 2024

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LANG-786] StringUtils equals() relies on undefined behavior</title>
                <link>https://issues.apache.org/jira/browse/LANG-786</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;Since the &lt;tt&gt;java.lang.CharSequence&lt;/tt&gt; class was first introduced in 1.4, the JavaDoc block has contained the following note:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This interface does not refine the general contracts of the equals and hashCode methods. The result of comparing two objects that implement CharSequence is therefore, in general, undefined. Each object may be implemented by a different class, and there is no guarantee that each class will be capable of testing its instances for equality with those of the other.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;When the signature of the StringUtils equals() method was changed from &lt;tt&gt;equals(String, String)&lt;/tt&gt; to &lt;tt&gt;equals(CharSequence, CharSequence)&lt;/tt&gt; in R920543, the implementation still relied on calling CharSequence#equals(Object) even though, in general, the result is undefined.&lt;/p&gt;

&lt;p&gt;One example where &lt;tt&gt;equals(Object)&lt;/tt&gt; returns &lt;tt&gt;false&lt;/tt&gt; even though, as CharSequences, two objects represent equal sequences is when one object is an instance of &lt;tt&gt;javax.lang.model.element.Name&lt;/tt&gt; and the other object is a String.&lt;/p&gt;</description>
                <environment>&lt;p&gt;java version &quot;1.7.0_02&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_02-b13)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 22.0-b10, mixed mode)&lt;/p&gt;

&lt;p&gt;Fedora 15 AMD64&lt;/p&gt;</environment>
        <key id="12539203">LANG-786</key>
            <summary>StringUtils equals() relies on undefined behavior</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dtrebbien">Daniel Trebbien</reporter>
                        <labels>
                            <label>StringUtils</label>
                    </labels>
                <created>Fri, 20 Jan 2012 19:50:47 +0000</created>
                <updated>Mon, 21 Oct 2013 05:46:42 +0000</updated>
                            <resolved>Mon, 23 Jan 2012 17:52:39 +0000</resolved>
                                                    <fixVersion>3.2</fixVersion>
                                    <component>lang.*</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13190049" author="dtrebbien" created="Fri, 20 Jan 2012 19:58:37 +0000"  >&lt;p&gt;Fix&lt;/p&gt;

&lt;p&gt;This re-introduces StringUtils#equals(String, String) and changes StringUtils#equals(CharSequence, CharSequence) to compare chars individually.&lt;/p&gt;</comment>
                            <comment id="13191293" author="mbenson" created="Mon, 23 Jan 2012 17:52:39 +0000"  >&lt;p&gt;Hi, Daniel, and thanks for your contribution!  Notwithstanding the obvious potential for arguments about OO design and method overloading, I have reworked your patch so that &lt;tt&gt;String-String&lt;/tt&gt; comparisons are still handled in the body of the basic &lt;tt&gt;equals(CharSequence, CharSequence)&lt;/tt&gt; method; thus no exception is needed in &lt;tt&gt;StringUtilsTest#testStringUtilsCharSequenceContract()&lt;/tt&gt;.  Specifically I have retained your &lt;tt&gt;StringUtilsEqualsIndexOfTest&lt;/tt&gt; improvements.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Committed revision 1234915.&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="13479161" author="dma_k" created="Thu, 18 Oct 2012 17:25:13 +0000"  >&lt;p&gt;I think there is still area for improvement: &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/lang/trunk/src/main/java/org/apache/commons/lang3/CharSequenceUtils.java?revision=1199894&amp;amp;view=markup#l192&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;line 192 of CharSequenceUtils()&lt;/a&gt; reads&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;TODO: Implement rather than convert to String&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;In my case I have &lt;tt&gt;CharSequence&lt;/tt&gt; that implements a &quot;lazy&quot; string, and &lt;tt&gt;toString()&lt;/tt&gt; implementation is very expensive plus can potentially cause OOM.&lt;/p&gt;

&lt;p&gt;Thus &lt;tt&gt;CharSequenceUtils.regionMatches()&lt;/tt&gt; should really do char-by-char comparison, leaving the optimization to underlying &lt;tt&gt;CharSequence&lt;/tt&gt; implementation.&lt;/p&gt;</comment>
                            <comment id="13479203" author="sebb@apache.org" created="Thu, 18 Oct 2012 18:12:26 +0000"  >&lt;p&gt;@Dmitry: please raise this as a new JIRA issue (you can then link it to this one if you want).&lt;/p&gt;

&lt;p&gt;We have already closed this issue, and your comment is about performance rather than correctness.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12511312" name="equals.patch" size="9458" author="dtrebbien" created="Fri, 20 Jan 2012 19:58:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>224705</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0afuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>